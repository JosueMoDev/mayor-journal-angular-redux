{"ast":null,"code":"import { Usuario } from '../models/user.model';\nimport * as action from '../auth/auth.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/auth\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"@ngrx/store\";\nexport class AuthService {\n  constructor(auth, firestore, store) {\n    this.auth = auth;\n    this.firestore = firestore;\n    this.store = store;\n  }\n  initAuthListener() {\n    this.auth.authState.subscribe(user => {\n      if (user) {\n        // @ts-ignore\n        this.subscription = this.firestore.doc(`${user.uid}/usuario`).valueChanges().subscribe(firestoreUser => {\n          const user = Usuario.fromFirebase(firestoreUser);\n          this._user = user;\n          this.store.dispatch(action.setUser({\n            user\n          }));\n        });\n      } else {\n        this.subscription.unsubscribe();\n        this.store.dispatch(action.unSetUser());\n        this._user = null;\n      }\n    });\n  }\n  crearUsuario(nombre, correo, password) {\n    return this.auth.createUserWithEmailAndPassword(correo, password).then(({\n      user\n    }) => {\n      const newUser = new Usuario(user.uid, nombre, user.email);\n      return this.firestore.doc(`${user.uid}/usuario`).set({\n        ...newUser\n      });\n    });\n  }\n  startLogin(correo, password) {\n    return this.auth.signInWithEmailAndPassword(correo, password);\n  }\n  logOut() {\n    this.auth.signOut();\n  }\n  isAuth() {\n    return this.auth.authState;\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.AngularFireAuth), i0.ɵɵinject(i2.AngularFirestore), i0.ɵɵinject(i3.Store));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}